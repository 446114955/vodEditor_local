<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>专题编辑器</title>

    <link href="stylesheets/bootstrap.min.css" rel="stylesheet">
    <link href="stylesheets/jquery.mCustomScrollbar.min.css" rel="stylesheet">
    <link href="stylesheets/jquery-ui.min.css" rel="stylesheet">
    <link href="stylesheets/style.css" rel="stylesheet">
    <link href="stylesheets/custom.min.css" rel="stylesheet">
    <link href="stylesheets/editor.css" rel="stylesheet">
</head>

<body class="nav-md">
    <div class="container body">
        <div class="head_container">
            <div class="navbar nav_title logo_content" style="border: 0;">
                <a href="index.html" class="site_title">
                    <div class="nav_logo">
                        <img src="images/logo/ms_logox.png" alt="..." class="img-circle">
                    </div>
                    <div class="nav_text">
                        <span>专题编辑器</span>
                    </div>

                </a>
            </div>
            <div class="top_nav top_container">
                <div class="nav_menu">
                    <nav>
                        <div class="nav toggle">
                            <label>专题：</label>
                            <input class="tilte" type="text">
                        </div>
                        <ul class="nav navbar-nav navbar-right">
                            <li class="">
                                <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown"
                                    aria-expanded="false">
                                    <img src="images/img.jpg" alt="">John Doe
                                    <span class=" fa fa-angle-down"></span>
                                </a>
                                <ul class="dropdown-menu dropdown-usermenu pull-right">
                                    <li><a href="javascript:;"> Profile</a></li>
                                    <li>
                                        <a href="javascript:;">
                                            <span class="badge bg-red pull-right">50%</span>
                                            <span>Settings</span>
                                        </a>
                                    </li>
                                    <li><a href="javascript:;">Help</a></li>
                                    <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                                </ul>
                            </li>

                        </ul>
                    </nav>

                </div>
            </div>
        </div>

        <div class="spe_container">
            <div class="left_container">
                <div class="left_warpper">
                    <div class="ctrol_file  menu_section active">
                        <ul class="nav side-menu">
                            <li class="pic_li">
                                <a>
                                    <div id="upPic" class="glyphicon glyphicon-picture pic_btn"></div>
                                    <input type="file" id="inputPic" class="glyphicon glyphicon-picture pic_btn" name="posterFileTop"
                                        hidden="hidden" accept=".jpg,.png">
                                </a>
                            </li>
                            <li class="save_li">
                                <a>
                                    <div id="saveJson" class="glyphicon glyphicon-floppy-saved save_btn" aria-hidden="true"></div>
                                </a>
                            </li>
                            <li class="download_li">
                                <a>
                                    <div id="downloadHtml" class="glyphicon glyphicon-save download_btn" aria-hidden="true"></div>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- 图层区域 -->
                    <div class="ctrol_layer">
                        <!-- 图层标题 -->
                        <div class="layer_title">
                            图层：
                            <div class="layer_line"></div>
                        </div>
                        <!-- 图层内容 -->
                        <div class="layer_container" style="height:calc(100% - 25px + 2px + 2px) ;">
                            <ul id="layer_list" class="ui-sortable">
                            </ul>
                        </div>
                    </div>
                </div>

            </div>


            <div class="middle_container">

                <div class="stage_container">
                    <!-- 图层标题 -->
                    <div class="stage_title">
                        编辑区域：
                    </div>
                    <!-- 主编辑区域 -->
                    <div id="stage" class="x_panel">

                    </div>
                </div>

            </div>
            <div class="right_container">
                <div class="right_warpper">
                    <!-- 居中设置 -->
                    <div id="align_ctrol">
                        <div id="left_align">
                            <a class="glyphicon glyphicon-align-left"></a>
                        </div>
                        <div id="center_align">
                            <a class="glyphicon glyphicon glyphicon-align-center"></a>
                        </div>
                        <div id="vertical_align">
                            <a class="glyphicon glyphicon-align-justify"></a>
                        </div>
                        <div id="right_align">
                            <a class="glyphicon glyphicon-align-right"></a>
                        </div>
                    </div>
                    <div id="pic_attr">
                        <div class="attr_title">
                            <!-- 图片属性 -->
                            <div class="pic_position">
                                <div class="pic_title">
                                    当前图片属性:
                                </div>
                                <div id="pic_x" class="pic_from">
                                    <label>x坐标:</label>
                                    <input id="inputX" class="prop-input" value="" min="0" type="tel">
                                </div>
                                <div id="pic_y" class="pic_from">
                                    <label>y坐标:</label>
                                    <input id="inputY" class="prop-input" value="" min="0" type="tel">
                                </div>
                                <div id="pic_id" class="pic_from">
                                    <label>ID:</label>
                                    <input id="inputId" class="prop-input" value="" min="0">
                                </div>
                                <div id="pic_alpha" class="pic_from">
                                    <label>透明度:</label>
                                    <input id="inputAlpha" class="prop-input" value="1" min="0" type="tel">
                                </div>
                                <div class="pic_state pic_from">
                                    <label>属性:</label>
                                    <select id='selectAlt'>
                                        <option>图片</option>
                                        <option>按钮</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="btn_attr">
                        <div class="attr_title">
                            <div class="btn_title">
                                按钮属性:
                            </div>
                            <div id="btn_light" class="btn_state">
                                <label style="display:inline-block">按钮选择:</label>
                                <input style="display:inline-block" type="file" id="inputBtnL" class="" name="posterFileTop"
                                    hidden="hidden" accept=".jpg,.png">
                            </div>
                            <div id="btn_t" class="btn_from">
                                <label>向上ID:</label>
                                <input id="inputTop" class="btn-input" value="" min="0">
                            </div>
                            <div id="btn_b" class="btn_from">
                                <label>向下ID:</label>
                                <input id="inputBottom" class="btn-input" value="" min="0">
                            </div>
                            <div id="btn_l" class="btn_from">
                                <label>向左ID:</label>
                                <input id="inputLeft" class="btn-input" value="" min="0">
                            </div>
                            <div id="btn_r" class="btn_from">
                                <label>向右ID:</label>
                                <input id="inputRight" class="btn-input" value="" min="0">
                            </div>
                            <div class="btn_state">
                                <label>按钮类型:</label>
                                <select id='btn_state'>
                                    <option>视频按钮</option>
                                    <option>更多精彩</option>
                                    <option>返回</option>
                                </select>
                            </div>
                            <div class="btn_state">
                                <label>免费视频:</label>
                                <select id='btn_free'>
                                    <option>否</option>
                                    <option>是</option>
                                </select>
                            </div>
                            <div class="btn_sure">
                                <button id="add_viedo" type="button" class="add_btn">添加视频</button>
                                <button id="add_more" type="button" class="add_btn">二级页面</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 媒咨界面 -->
        <div id="media_capital">
            <div class="media_wapper">
            </div>
        </div>
        <!-- 输入二级界面 -->
        <div id="more_lint">
            <div class="more_wapper">
                <div class="more_title">
                    <div class=" nav toggle">
                        <label>添加链接：</label>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        <li id="close_more">
                            <a style="color:#5A738E"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
                        </li>
                    </ul>
                </div>
                <div class="more_container">
                    <div class="select_name top_search ">
                        <div class="input-group">
                            <input id="more_input" type="text" class="form-control" placeholder="Searchfor..">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button" id="more_btn">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;">确定</font>
                                    </font>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 下载文件 -->
        <a href="" download="" id="downloadFile" hidden>Download file</a>
    </div>



    <div id="fc_create" data-toggle="modal" data-target="#CalenderModalNew"></div>
    <div id="fc_edit" data-toggle="modal" data-target="#CalenderModalEdit"></div>


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script src="javascripts/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="javascripts/jquery-ui.min.js"></script>
    <script src="javascripts/custom.min.js"></script>
    <script src="js/component/global.js"></script>
    <script src="js/component/editor/main.js"></script>
    <script src="js/component/editor/logic.js"></script>
    <script src="js/component/editor/layerCtrol.js"></script>
    <script src="js/component/editor/container.js"></script>
    <script src="js/component/editor/picManage.js"></script>
    <script src="js/component/editor/ctrol.js"></script>
    <script>
        var mian = null;
        (function ($) {
            $(window).on("load", function () {
                $('.body').css('height',`${document.documentElement.clientHeight}px`);
                $(".ctrol_layer").mCustomScrollbar({
                    callbacks: {
                        onInit: function () {
                            $('.list_ctrol').css('margin-left', '10px');
                        }
                    }
                });
                // 适配窗口
                window.onresize = function () {
                    var offsetHei = document.documentElement.clientHeight - 57;
                    $('.ctrol_layer').css('height', `${offsetHei}px`);
                    $('.right_container').css('height', `${offsetHei}px`);
                    $('body').css('height',`${document.documentElement.clientHeight}px`);
                }
                // 适配滚动条
                function scroll() {

                    $('.ctrol_layer').scroll(function () { })
                    function winScroll(e) {
                        $('.list_ctrol').css('margin-left', '10px');
                    }
                }
                scroll();
                // mian = new main();
                // mian.init();
                let id = getQueryString('id')
                $.ajax({
                    url: `http://localhost:4000/get/json`,
                    type: "GET",
                    data: `id=${id}`,
                    // jsonpCallback:"callback",
                    success: function (data) {
                        console.log(data);
                        if(!data.data){
                            mian = new main();
                            mian.init();
                        }else{
                            mian = new main();
                            mian.init(data.data);
                        }
                    },
                });

            });
        })(jQuery);
        // 正则获取url参数
        function getQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }
    </script>
</body>

</html>